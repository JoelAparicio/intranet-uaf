{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      solicitudes: [],\n      filtroTipo: '',\n      filtroFechaInicio: '',\n      filtroFechaFin: ''\n    };\n  },\n  computed: {\n    solicitudesFiltradas() {\n      return this.solicitudes.filter(solicitud => {\n        const cumpleTipo = this.filtroTipo ? solicitud.id_tipo_solicitud === parseInt(this.filtroTipo) : true;\n        const cumpleFechaInicio = this.filtroFechaInicio ? new Date(solicitud.fecha_creacion) >= new Date(this.filtroFechaInicio) : true;\n        const cumpleFechaFin = this.filtroFechaFin ? new Date(solicitud.fecha_creacion) <= new Date(this.filtroFechaFin) : true;\n        return cumpleTipo && cumpleFechaInicio && cumpleFechaFin;\n      });\n    }\n  },\n  created() {\n    this.fetchSolicitudes();\n  },\n  methods: {\n    async fetchSolicitudes() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/historial_solicitud');\n        this.solicitudes = response.data;\n      } catch (error) {\n        console.error('Error fetching solicitudes', error);\n      }\n    },\n    filtrarPorFecha() {\n      // El filtrado por fecha se maneja automáticamente a través del computed property\n    }\n  }\n};","map":{"version":3,"names":["axios","data","solicitudes","filtroTipo","filtroFechaInicio","filtroFechaFin","computed","solicitudesFiltradas","filter","solicitud","cumpleTipo","id_tipo_solicitud","parseInt","cumpleFechaInicio","Date","fecha_creacion","cumpleFechaFin","created","fetchSolicitudes","methods","response","get","error","console","filtrarPorFecha"],"sources":["C:\\laragon\\www\\intranet-frontend\\src\\components\\Historial_Solicitudes.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n          <div>\r\n            <select class=\"form-select\" v-model=\"filtroTipo\">\r\n              <option value=\"\">Todos los Formularios</option>\r\n              <option v-for=\"solicitud in solicitudes\" :key=\"solicitud.id_tipo_solicitud\" :value=\"solicitud.id_tipo_solicitud\">\r\n                {{ solicitud.tipo_solicitud.tipo_solicitud }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div class=\"d-flex\">\r\n            <input \r\n              type=\"date\" \r\n              class=\"form-control me-2\" \r\n              v-model=\"filtroFechaInicio\" \r\n              placeholder=\"Fecha de Inicio\" />\r\n            <input \r\n              type=\"date\" \r\n              class=\"form-control me-2\" \r\n              v-model=\"filtroFechaFin\" \r\n              placeholder=\"Fecha de Fin\" />\r\n            <button class=\"btn btn-primary\" @click=\"filtrarPorFecha\">Buscar</button>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <table class=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">ID</th>\r\n                <th scope=\"col\">Tipo de Solicitud</th>\r\n                <th scope=\"col\">Fecha de Inicio</th>\r\n                <th scope=\"col\">Fecha de Fin</th>\r\n                <th scope=\"col\">Estado</th>\r\n                <th scope=\"col\">Fecha de Creación</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"solicitud in solicitudesFiltradas\" :key=\"solicitud.id_solicitud\">\r\n                <td>{{ solicitud.id_solicitud }}</td>\r\n                <td>{{ solicitud.tipo_solicitud.tipo_solicitud }}</td>\r\n                <td>{{ solicitud.fecha_inicio }}</td>\r\n                <td>{{ solicitud.fecha_fin }}</td>\r\n                <td>{{ solicitud.estado }}</td>\r\n                <td>{{ solicitud.fecha_creacion }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        solicitudes: [],\r\n        filtroTipo: '',\r\n        filtroFechaInicio: '',\r\n        filtroFechaFin: '',\r\n      };\r\n    },\r\n    computed: {\r\n      solicitudesFiltradas() {\r\n        return this.solicitudes.filter(solicitud => {\r\n          const cumpleTipo = this.filtroTipo ? solicitud.id_tipo_solicitud === parseInt(this.filtroTipo) : true;\r\n          const cumpleFechaInicio = this.filtroFechaInicio ? new Date(solicitud.fecha_creacion) >= new Date(this.filtroFechaInicio) : true;\r\n          const cumpleFechaFin = this.filtroFechaFin ? new Date(solicitud.fecha_creacion) <= new Date(this.filtroFechaFin) : true;\r\n          return cumpleTipo && cumpleFechaInicio && cumpleFechaFin;\r\n        });\r\n      },\r\n    },\r\n    created() {\r\n      this.fetchSolicitudes();\r\n    },\r\n    methods: {\r\n      async fetchSolicitudes() {\r\n        try {\r\n          const response = await axios.get('http://localhost:8000/api/historial_solicitud');\r\n          this.solicitudes = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching solicitudes', error);\r\n        }\r\n      },\r\n      filtrarPorFecha() {\r\n        // El filtrado por fecha se maneja automáticamente a través del computed property\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n  }\r\n  .card {\r\n    width: 100%;\r\n  }\r\n  .card-header {\r\n    background-color: #f8f9fa;\r\n  }\r\n  </style>\r\n  "],"mappings":"AAuDE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE,EAAE;MACdC,iBAAiB,EAAE,EAAE;MACrBC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,oBAAoBA,CAAA,EAAG;MACrB,OAAO,IAAI,CAACL,WAAW,CAACM,MAAM,CAACC,SAAQ,IAAK;QAC1C,MAAMC,UAAS,GAAI,IAAI,CAACP,UAAS,GAAIM,SAAS,CAACE,iBAAgB,KAAMC,QAAQ,CAAC,IAAI,CAACT,UAAU,IAAI,IAAI;QACrG,MAAMU,iBAAgB,GAAI,IAAI,CAACT,iBAAgB,GAAI,IAAIU,IAAI,CAACL,SAAS,CAACM,cAAc,KAAK,IAAID,IAAI,CAAC,IAAI,CAACV,iBAAiB,IAAI,IAAI;QAChI,MAAMY,cAAa,GAAI,IAAI,CAACX,cAAa,GAAI,IAAIS,IAAI,CAACL,SAAS,CAACM,cAAc,KAAK,IAAID,IAAI,CAAC,IAAI,CAACT,cAAc,IAAI,IAAI;QACvH,OAAOK,UAAS,IAAKG,iBAAgB,IAAKG,cAAc;MAC1D,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,gBAAgB,CAAC,CAAC;EACzB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,gBAAgBA,CAAA,EAAG;MACvB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMpB,KAAK,CAACqB,GAAG,CAAC,+CAA+C,CAAC;QACjF,IAAI,CAACnB,WAAU,GAAIkB,QAAQ,CAACnB,IAAI;MAClC,EAAE,OAAOqB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACpD;IACF,CAAC;IACDE,eAAeA,CAAA,EAAG;MAChB;IAAA;EAEJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}