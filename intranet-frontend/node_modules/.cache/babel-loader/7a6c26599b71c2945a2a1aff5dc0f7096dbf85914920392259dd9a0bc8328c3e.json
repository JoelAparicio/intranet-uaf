{"ast":null,"code":"import { createStore } from 'vuex';\nimport axios from 'axios';\nexport default createStore({\n  state: {\n    authToken: localStorage.getItem('auth_token') || '',\n    //Token de autenticación\n    authStatus: '',\n    //\n    registerStatus: ''\n  },\n  mutations: {\n    auth_request(state) {\n      state.authStatus = 'loading';\n    },\n    auth_success(state, token) {\n      state.authStatus = 'success';\n      state.authToken = token;\n    },\n    auth_error(state) {\n      state.authStatus = 'error';\n    },\n    logout(state) {\n      state.authStatus = '';\n      state.authToken = '';\n    },\n    register_request(state) {\n      state.registerStatus = 'loading';\n    },\n    register_success(state) {\n      state.registerStatus = 'success';\n    },\n    register_error(state) {\n      state.registerStatus = 'error';\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, user) {\n      commit('auth_request');\n      try {\n        const response = await axios.post('http://localhost:8000/api/login', user);\n        const token = response.data.token;\n        localStorage.setItem('auth_token', token);\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n        commit('auth_success', token);\n        return response;\n      } catch (error) {\n        commit('auth_error');\n        localStorage.removeItem('auth_token');\n        throw error;\n      }\n    },\n    async register({\n      commit\n    }, user) {\n      commit('register_request');\n      try {\n        const response = await axios.post('http://localhost:8000/api/register', user);\n        commit('register_success');\n        return response;\n      } catch (error) {\n        commit('register_error');\n        throw error;\n      }\n    },\n    logout({\n      commit\n    }) {\n      return new Promise(resolve => {\n        commit('logout');\n        localStorage.removeItem('auth_token');\n        delete axios.defaults.headers.common['Authorization'];\n        resolve();\n      });\n    }\n  },\n  getters: {\n    isAuthenticated: state => !!state.authToken,\n    authStatus: state => state.authStatus,\n    registerStatus: state => state.registerStatus\n  }\n});","map":{"version":3,"names":["createStore","axios","state","authToken","localStorage","getItem","authStatus","registerStatus","mutations","auth_request","auth_success","token","auth_error","logout","register_request","register_success","register_error","actions","login","commit","user","response","post","data","setItem","defaults","headers","common","error","removeItem","register","Promise","resolve","getters","isAuthenticated"],"sources":["C:/laragon/www/intranet-frontend/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport axios from 'axios'\n\nexport default createStore({\n  state: {\n    authToken: localStorage.getItem('auth_token') || '', //Token de autenticación\n    authStatus: '', //\n    registerStatus: ''\n  },\n  mutations: {\n    auth_request(state) {\n      state.authStatus = 'loading'\n    },\n    auth_success(state, token) {\n      state.authStatus = 'success'\n      state.authToken = token\n    },\n    auth_error(state) {\n      state.authStatus = 'error'\n    },\n    logout(state) {\n      state.authStatus = ''\n      state.authToken = ''\n    },\n    register_request(state) {\n      state.registerStatus = 'loading'\n    },\n    register_success(state) {\n      state.registerStatus = 'success'\n    },\n    register_error(state) {\n      state.registerStatus = 'error'\n    }\n  },\n  actions: {\n    async login({ commit }, user) {\n      commit('auth_request')\n      try {\n        const response = await axios.post('http://localhost:8000/api/login', user)\n        const token = response.data.token\n        localStorage.setItem('auth_token', token)\n        axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n        commit('auth_success', token)\n        return response\n      } catch (error) {\n        commit('auth_error')\n        localStorage.removeItem('auth_token')\n        throw error\n      }\n    },\n    async register({ commit }, user) {\n      commit('register_request')\n      try {\n        const response = await axios.post('http://localhost:8000/api/register', user)\n        commit('register_success')\n        return response\n      } catch (error) {\n        commit('register_error')\n        throw error\n      }\n    },\n    logout({ commit }) {\n      return new Promise((resolve) => {\n        commit('logout')\n        localStorage.removeItem('auth_token')\n        delete axios.defaults.headers.common['Authorization']\n        resolve()\n      })\n    }\n  },\n  getters: {\n    isAuthenticated: state => !!state.authToken,\n    authStatus: state => state.authStatus,\n    registerStatus: state => state.registerStatus\n  }\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}