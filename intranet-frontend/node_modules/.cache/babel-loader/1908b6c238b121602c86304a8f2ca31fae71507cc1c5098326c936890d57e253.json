{"ast":null,"code":"import { defineComponent } from 'vue';\nimport FullCalendar from '@fullcalendar/vue3';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport esLocale from '@fullcalendar/core/locales/es';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nexport default defineComponent({\n  components: {\n    FullCalendar\n  },\n  data() {\n    return {\n      eventGuid: 0,\n      showModal: false,\n      newBirthday: {\n        nombre: '',\n        departamento: '',\n        birthday: ''\n      },\n      calendarOptions: {\n        plugins: [dayGridPlugin, interactionPlugin // needed for dateClick\n        ],\n        headerToolbar: {\n          left: 'prev,next today addBirthdayButton',\n          center: 'title',\n          right: 'colaboradoresButton, downloadExcelButton'\n        },\n        customButtons: {\n          addBirthdayButton: {\n            text: 'Agregar Cumpleaños',\n            click: () => {\n              this.showModal = true;\n            }\n          },\n          downloadExcelButton: {\n            text: 'Descargar Excel',\n            click: () => {\n              this.downloadExcel();\n            }\n          },\n          colaboradoresButton: {\n            text: 'Directorio de colaboradores',\n            click: () => {\n              this.goToColaboradores();\n            }\n          }\n        },\n        initialView: 'dayGridMonth',\n        locale: esLocale,\n        // Usar el locale español\n        editable: false,\n        // Deshabilitar edición\n        selectable: false,\n        // Deshabilitar selección\n        selectMirror: true,\n        dayMaxEvents: true,\n        weekends: true,\n        eventClick: this.handleEventClick,\n        eventsSet: this.handleEvents,\n        events: this.fetchEvents // Fetch events from API\n      },\n      currentEvents: []\n    };\n  },\n  methods: {\n    handleEventClick(clickInfo) {\n      Swal.fire({\n        title: '¿Estás seguro?',\n        text: `¿Estás seguro de que deseas eliminar el cumpleaños de ${clickInfo.event.title}?`,\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Sí, eliminar',\n        cancelButtonText: 'Cancelar'\n      }).then(result => {\n        if (result.isConfirmed) {\n          axios.put(`http://localhost:8000/api/birthdays/${clickInfo.event.id}`, {\n            deleted: true\n          }).then(() => {\n            clickInfo.event.remove();\n            Swal.fire('Eliminado', 'El evento ha sido eliminado.', 'success');\n          }).catch(error => {\n            console.error('Error eliminando el evento:', error);\n            Swal.fire('Error', 'Hubo un problema eliminando el evento.', 'error');\n          });\n        }\n      });\n    },\n    handleEvents(events) {\n      this.currentEvents = events;\n    },\n    fetchEvents(fetchInfo, successCallback, failureCallback) {\n      axios.get('http://localhost:8000/api/birthdays').then(response => {\n        const events = response.data.map(event => ({\n          id: event.id,\n          title: event.nombre,\n          start: event.birthday,\n          allDay: true\n        }));\n        successCallback(events);\n      }).catch(error => {\n        console.error('Error fetching events:', error);\n        failureCallback(error);\n      });\n    },\n    createEventId() {\n      return String(this.eventGuid++);\n    },\n    addBirthday() {\n      axios.post('http://localhost:8000/api/birthdays', this.newBirthday).then(response => {\n        Swal.fire('Agregado', response.data.message, 'success');\n        this.showModal = false;\n        this.fetchEvents();\n      }).catch(error => {\n        console.error('Error agregando el cumpleaños:', error);\n        Swal.fire('Error', 'Hubo un problema agregando el cumpleaños.', 'error');\n      });\n    },\n    downloadExcel() {\n      // Lógica para descargar el Excel\n      console.log('Descargando Excel...');\n    },\n    goToColaboradores() {\n      // Lógica para navegar al directorio de colaboradores\n      console.log('Navegando al directorio de colaboradores...');\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","FullCalendar","dayGridPlugin","interactionPlugin","esLocale","axios","Swal","components","data","eventGuid","showModal","newBirthday","nombre","departamento","birthday","calendarOptions","plugins","headerToolbar","left","center","right","customButtons","addBirthdayButton","text","click","downloadExcelButton","downloadExcel","colaboradoresButton","goToColaboradores","initialView","locale","editable","selectable","selectMirror","dayMaxEvents","weekends","eventClick","handleEventClick","eventsSet","handleEvents","events","fetchEvents","currentEvents","methods","clickInfo","fire","title","event","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","put","id","deleted","remove","catch","error","console","fetchInfo","successCallback","failureCallback","get","response","map","start","allDay","createEventId","String","addBirthday","post","message","log"],"sources":["C:\\laragon\\www\\intranet-frontend\\src\\components\\Calendario_Birth.vue"],"sourcesContent":["<template>\r\n  <div class=\"container-fluid d-flex p-0\">\r\n    <div class=\"main-content flex-grow-1 p-1\">\r\n      <FullCalendar\r\n        :options=\"calendarOptions\"\r\n      >\r\n        <template v-slot:eventContent=\"arg\">\r\n          <b>{{ arg.timeText }}</b>\r\n          <i>{{ arg.event.title }}</i>\r\n        </template>\r\n      </FullCalendar>\r\n\r\n      <!-- Modal para agregar cumpleaños -->\r\n      <transition name=\"modal\">\r\n        <div v-if=\"showModal\" class=\"modal-overlay\">\r\n          <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Agregar Cumpleaños</h5>\r\n                <button type=\"button\" class=\"btn-close\" @click=\"showModal = false\"></button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n                <form @submit.prevent=\"addBirthday\">\r\n                  <div class=\"mb-3\">\r\n                    <label for=\"nombre\" class=\"form-label\">Nombre</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"nombre\" v-model=\"newBirthday.nombre\" required>\r\n                  </div>\r\n                  <div class=\"mb-3\">\r\n                    <label for=\"departamento\" class=\"form-label\">Departamento</label>\r\n                    <select name=\"departamento\" v-model=\"newBirthday.departamento\" id=\"departamento\" class=\"form-control custom-select\">\r\n                      <option value=\"\">Selecciona un departamento</option>\r\n                      <option value=\"1\">Despacho superior</option>\r\n                      <option value=\"2\">Secretaría</option>\r\n                      <option value=\"3\">Relaciones públicas</option>\r\n                      <option value=\"4\">Administración</option>\r\n                      <option value=\"5\">Recursos humanos</option>\r\n                      <option value=\"6\">Análisis operativo</option>\r\n                      <option value=\"7\">Análisis estratégico</option>\r\n                      <option value=\"8\">Asesoría legal</option>\r\n                      <option value=\"9\">Contact Center</option>\r\n                      <option value=\"10\">Cooperación nacional e internacional</option>\r\n                      <option value=\"11\">Tecnología</option>\r\n                    </select>\r\n                  </div>\r\n                  <div class=\"mb-3\">\r\n                    <label for=\"birthday\" class=\"form-label\">Fecha de Cumpleaños</label>\r\n                    <input type=\"date\" class=\"form-control\" id=\"birthday\" v-model=\"newBirthday.birthday\" required>\r\n                  </div>\r\n                  <button type=\"submit\" class=\"btn btn-primary\">Agregar</button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport FullCalendar from '@fullcalendar/vue3'\r\nimport dayGridPlugin from '@fullcalendar/daygrid'\r\nimport interactionPlugin from '@fullcalendar/interaction'\r\nimport esLocale from '@fullcalendar/core/locales/es'\r\nimport axios from 'axios'\r\nimport Swal from 'sweetalert2'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    FullCalendar,\r\n  },\r\n  data() {\r\n    return {\r\n      eventGuid: 0,\r\n      showModal: false,\r\n      newBirthday: {\r\n        nombre: '',\r\n        departamento: '',\r\n        birthday: ''\r\n      },\r\n      calendarOptions: {\r\n        plugins: [\r\n          dayGridPlugin,\r\n          interactionPlugin // needed for dateClick\r\n        ],\r\n        headerToolbar: {\r\n          left: 'prev,next today addBirthdayButton',\r\n          center: 'title',\r\n          right: 'colaboradoresButton, downloadExcelButton'\r\n        },\r\n        customButtons: {\r\n          addBirthdayButton: {\r\n            text: 'Agregar Cumpleaños',\r\n            click: () => {\r\n              this.showModal = true;\r\n            }\r\n          },\r\n          downloadExcelButton: {\r\n            text: 'Descargar Excel',\r\n            click: () => {\r\n              this.downloadExcel();\r\n            }\r\n          },\r\n          colaboradoresButton: {\r\n            text: 'Directorio de colaboradores',\r\n            click: () => {\r\n              this.goToColaboradores();\r\n            }\r\n          }\r\n        },\r\n        initialView: 'dayGridMonth',\r\n        locale: esLocale, // Usar el locale español\r\n        editable: false, // Deshabilitar edición\r\n        selectable: false, // Deshabilitar selección\r\n        selectMirror: true,\r\n        dayMaxEvents: true,\r\n        weekends: true,\r\n        eventClick: this.handleEventClick,\r\n        eventsSet: this.handleEvents,\r\n        events: this.fetchEvents // Fetch events from API\r\n      },\r\n      currentEvents: [],\r\n    }\r\n  },\r\n  methods: {\r\n    handleEventClick(clickInfo) {\r\n      Swal.fire({\r\n        title: '¿Estás seguro?',\r\n        text: `¿Estás seguro de que deseas eliminar el cumpleaños de ${clickInfo.event.title}?`,\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#3085d6',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Sí, eliminar',\r\n        cancelButtonText: 'Cancelar'\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          axios.put(`http://localhost:8000/api/birthdays/${clickInfo.event.id}`, { deleted: true })\r\n            .then(() => {\r\n              clickInfo.event.remove();\r\n              Swal.fire(\r\n                'Eliminado',\r\n                'El evento ha sido eliminado.',\r\n                'success'\r\n              );\r\n            })\r\n            .catch(error => {\r\n              console.error('Error eliminando el evento:', error);\r\n              Swal.fire(\r\n                'Error',\r\n                'Hubo un problema eliminando el evento.',\r\n                'error'\r\n              );\r\n            });\r\n        }\r\n      });\r\n    },\r\n    handleEvents(events) {\r\n      this.currentEvents = events\r\n    },\r\n    fetchEvents(fetchInfo, successCallback, failureCallback) {\r\n      axios.get('http://localhost:8000/api/birthdays')\r\n        .then(response => {\r\n          const events = response.data.map(event => ({\r\n            id: event.id,\r\n            title: event.nombre,\r\n            start: event.birthday,\r\n            allDay: true\r\n          }));\r\n          successCallback(events);\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching events:', error);\r\n          failureCallback(error);\r\n        });\r\n    },\r\n    createEventId() {\r\n      return String(this.eventGuid++)\r\n    },\r\n    addBirthday() {\r\n      axios.post('http://localhost:8000/api/birthdays', this.newBirthday)\r\n        .then(response => {\r\n          Swal.fire(\r\n            'Agregado',\r\n            response.data.message,\r\n            'success'\r\n          );\r\n          this.showModal = false;\r\n          this.fetchEvents();\r\n        })\r\n        .catch(error => {\r\n          console.error('Error agregando el cumpleaños:', error);\r\n          Swal.fire(\r\n            'Error',\r\n            'Hubo un problema agregando el cumpleaños.',\r\n            'error'\r\n          );\r\n        });\r\n    },\r\n    downloadExcel() {\r\n      // Lógica para descargar el Excel\r\n      console.log('Descargando Excel...');\r\n    },\r\n    goToColaboradores() {\r\n      // Lógica para navegar al directorio de colaboradores\r\n      console.log('Navegando al directorio de colaboradores...');\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.container-fluid {\r\n  height: 100vh;\r\n  display: flex;\r\n}\r\n\r\n.main-content {\r\n  flex-grow: 1;\r\n}\r\n\r\n.fc {\r\n  max-width: 100%;\r\n  height: calc(100vh - 120px); /* Ajustar el tamaño del calendario */\r\n  overflow: auto;\r\n}\r\n\r\n/* Estilos para el modal */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1050;\r\n}\r\n\r\n.modal-dialog {\r\n  max-width: 500px;\r\n  width: 100%;\r\n  margin: 0;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.modal-content {\r\n  background-color: #fff;\r\n  border-radius: 0.3rem;\r\n  box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 1rem 1rem;\r\n  border-bottom: 1px solid #dee2e6;\r\n}\r\n\r\n.modal-title {\r\n  margin-bottom: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.btn-close {\r\n  padding: 0.5rem;\r\n  border: none;\r\n}\r\n\r\n.modal-body {\r\n  padding: 1rem;\r\n}\r\n\r\n.modal-enter-active, .modal-leave-active {\r\n  opacity: 1;\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.modal-enter, .modal-leave-to /* .modal-leave-active en versiones anteriores a 2.1.8 */ {\r\n  opacity: 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}