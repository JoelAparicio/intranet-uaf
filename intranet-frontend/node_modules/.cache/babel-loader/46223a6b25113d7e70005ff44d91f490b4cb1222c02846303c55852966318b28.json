{"ast":null,"code":"import axios from 'axios';\nimport momment from 'moment';\nimport 'moment/locale/es'; // Importa el idioma español\n\nexport default {\n  data() {\n    return {\n      solicitudes: [],\n      tiposSolicitudes: [],\n      filtroTipo: '',\n      filtroFechaInicio: '',\n      filtroFechaFin: ''\n    };\n  },\n  computed: {\n    solicitudesFiltradas() {\n      return this.solicitudes.filter(solicitud => {\n        const cumpleTipo = this.filtroTipo ? solicitud.tipo_solicitud.id_tipo_solicitud === parseInt(this.filtroTipo) : true;\n        const cumpleFechaInicio = this.filtroFechaInicio ? new Date(solicitud.fecha_creacion) >= new Date(this.filtroFechaInicio) : true;\n        const cumpleFechaFin = this.filtroFechaFin ? new Date(solicitud.fecha_creacion) <= new Date(this.filtroFechaFin) : true;\n        return cumpleTipo && cumpleFechaInicio && cumpleFechaFin;\n      });\n    }\n  },\n  created() {\n    this.fetchSolicitudes();\n    this.fetchTiposSolicitudes();\n  },\n  methods: {\n    async fetchSolicitudes() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/historial_solicitud');\n        this.solicitudes = response.data;\n      } catch (error) {\n        console.error('Error fetching solicitudes', error);\n      }\n    },\n    async fetchTiposSolicitudes() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/listar_solicitud');\n        this.tiposSolicitudes = response.data;\n      } catch (error) {\n        console.error('Error fetching tipos de solicitudes', error);\n      }\n    },\n    formatFecha(fecha) {\n      return momment(fecha).format('MMMM D YYYY, h:mm a');\n    }\n  }\n};","map":{"version":3,"names":["axios","momment","data","solicitudes","tiposSolicitudes","filtroTipo","filtroFechaInicio","filtroFechaFin","computed","solicitudesFiltradas","filter","solicitud","cumpleTipo","tipo_solicitud","id_tipo_solicitud","parseInt","cumpleFechaInicio","Date","fecha_creacion","cumpleFechaFin","created","fetchSolicitudes","fetchTiposSolicitudes","methods","response","get","error","console","formatFecha","fecha","format"],"sources":["C:\\laragon\\www\\intranet-frontend\\src\\components\\Historial_Solicitudes.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n          <div>\r\n            <select class=\"form-select\" v-model=\"filtroTipo\">\r\n              <option value=\"\">Todos los Formularios</option>\r\n              <option v-for=\"tipo in tiposSolicitudes\" :key=\"tipo.id_tipo_solicitud\" :value=\"tipo.id_tipo_solicitud\">\r\n                {{ tipo.tipo_solicitud }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div class=\"d-flex align-items-center\">\r\n            <label class=\"form-label me-2 text-center\" style=\"width: 50px;\">\r\n              Desde\r\n            </label>\r\n            <input \r\n              type=\"date\" \r\n              class=\"form-control me-2\" \r\n              v-model=\"filtroFechaInicio\" \r\n              placeholder=\"Fecha de Inicio\" />\r\n            <label class=\"form-label me-2 text-center\" style=\"width: 50px;\">\r\n              Hasta\r\n            </label>\r\n            <input \r\n              type=\"date\" \r\n              class=\"form-control\" \r\n              v-model=\"filtroFechaFin\" \r\n              placeholder=\"Fecha de Fin\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <table class=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">ID</th>\r\n                <th scope=\"col\">Tipo de Solicitud</th>\r\n                <th scope=\"col\">Fecha inicial solicitada</th>\r\n                <th scope=\"col\">Fecha final solicitada</th>\r\n                <th scope=\"col\">Estado</th>\r\n                <th scope=\"col\">Fecha de Creación de solicitud</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"solicitud in solicitudesFiltradas\" :key=\"solicitud.id_solicitud\">\r\n                <td>{{ solicitud.id_solicitud }}</td>\r\n                <td>{{ solicitud.tipo_solicitud.tipo_solicitud }}</td>\r\n                <td>{{ formatFecha(solicitud.fecha_inicio) }}</td>\r\n                <td>{{ solicitud.fecha_fin }}</td>\r\n                <td>{{ solicitud.estado }}</td>\r\n                <td>{{ solicitud.fecha_creacion }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  import momment from 'moment';\r\n  import 'moment/locale/es'; // Importa el idioma español\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        solicitudes: [],\r\n        tiposSolicitudes: [],\r\n        filtroTipo: '',\r\n        filtroFechaInicio: '',\r\n        filtroFechaFin: '',\r\n      };\r\n    },\r\n    computed: {\r\n      solicitudesFiltradas() {\r\n        return this.solicitudes.filter(solicitud => {\r\n          const cumpleTipo = this.filtroTipo ? solicitud.tipo_solicitud.id_tipo_solicitud === parseInt(this.filtroTipo) : true;\r\n          const cumpleFechaInicio = this.filtroFechaInicio ? new Date(solicitud.fecha_creacion) >= new Date(this.filtroFechaInicio) : true;\r\n          const cumpleFechaFin = this.filtroFechaFin ? new Date(solicitud.fecha_creacion) <= new Date(this.filtroFechaFin) : true;\r\n          return cumpleTipo && cumpleFechaInicio && cumpleFechaFin;\r\n        });\r\n      },\r\n    },\r\n    created() {\r\n      this.fetchSolicitudes();\r\n      this.fetchTiposSolicitudes();\r\n    },\r\n    methods: {\r\n      async fetchSolicitudes() {\r\n        try {\r\n          const response = await axios.get('http://localhost:8000/api/historial_solicitud');\r\n          this.solicitudes = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching solicitudes', error);\r\n        }\r\n      },\r\n      async fetchTiposSolicitudes() {\r\n        try {\r\n          const response = await axios.get('http://localhost:8000/api/listar_solicitud');\r\n          this.tiposSolicitudes = response.data;\r\n        } catch (error) {\r\n          console.error('Error fetching tipos de solicitudes', error);\r\n        }\r\n      },\r\n      formatFecha(fecha) {\r\n        return momment(fecha).format('MMMM D YYYY, h:mm a');\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n  }\r\n  .card {\r\n    width: 100%;\r\n  }\r\n  .card-header {\r\n    background-color: #f8f9fa;\r\n  }\r\n  .form-label {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center; /* Centrado horizontal */\r\n  }\r\n  </style>\r\n  "],"mappings":"AA4DE,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,OAAM,MAAO,QAAQ;AAC5B,OAAO,kBAAkB,EAAE;;AAE3B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,gBAAgB,EAAE,EAAE;MACpBC,UAAU,EAAE,EAAE;MACdC,iBAAiB,EAAE,EAAE;MACrBC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,oBAAoBA,CAAA,EAAG;MACrB,OAAO,IAAI,CAACN,WAAW,CAACO,MAAM,CAACC,SAAQ,IAAK;QAC1C,MAAMC,UAAS,GAAI,IAAI,CAACP,UAAS,GAAIM,SAAS,CAACE,cAAc,CAACC,iBAAgB,KAAMC,QAAQ,CAAC,IAAI,CAACV,UAAU,IAAI,IAAI;QACpH,MAAMW,iBAAgB,GAAI,IAAI,CAACV,iBAAgB,GAAI,IAAIW,IAAI,CAACN,SAAS,CAACO,cAAc,KAAK,IAAID,IAAI,CAAC,IAAI,CAACX,iBAAiB,IAAI,IAAI;QAChI,MAAMa,cAAa,GAAI,IAAI,CAACZ,cAAa,GAAI,IAAIU,IAAI,CAACN,SAAS,CAACO,cAAc,KAAK,IAAID,IAAI,CAAC,IAAI,CAACV,cAAc,IAAI,IAAI;QACvH,OAAOK,UAAS,IAAKI,iBAAgB,IAAKG,cAAc;MAC1D,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACC,qBAAqB,CAAC,CAAC;EAC9B,CAAC;EACDC,OAAO,EAAE;IACP,MAAMF,gBAAgBA,CAAA,EAAG;MACvB,IAAI;QACF,MAAMG,QAAO,GAAI,MAAMxB,KAAK,CAACyB,GAAG,CAAC,+CAA+C,CAAC;QACjF,IAAI,CAACtB,WAAU,GAAIqB,QAAQ,CAACtB,IAAI;MAClC,EAAE,OAAOwB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACpD;IACF,CAAC;IACD,MAAMJ,qBAAqBA,CAAA,EAAG;MAC5B,IAAI;QACF,MAAME,QAAO,GAAI,MAAMxB,KAAK,CAACyB,GAAG,CAAC,4CAA4C,CAAC;QAC9E,IAAI,CAACrB,gBAAe,GAAIoB,QAAQ,CAACtB,IAAI;MACvC,EAAE,OAAOwB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC7D;IACF,CAAC;IACDE,WAAWA,CAACC,KAAK,EAAE;MACjB,OAAO5B,OAAO,CAAC4B,KAAK,CAAC,CAACC,MAAM,CAAC,qBAAqB,CAAC;IACrD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}