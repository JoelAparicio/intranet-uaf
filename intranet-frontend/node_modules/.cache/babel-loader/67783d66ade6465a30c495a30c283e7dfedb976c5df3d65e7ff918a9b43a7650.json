{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      solicitudes: [],\n      tiposSolicitudes: [],\n      filtroTipo: null,\n      filtroFechaInicio: null,\n      filtroFechaFin: null\n    };\n  },\n  computed: {\n    solicitudesFiltradas() {\n      return this.solicitudes.filter(solicitud => {\n        const cumpleTipo = this.filtroTipo ? solicitud.id_tipo_solicitud === this.filtroTipo : true;\n        const cumpleFechaInicio = this.filtroFechaInicio ? new Date(solicitud.fecha_creacion) >= new Date(this.filtroFechaInicio) : true;\n        const cumpleFechaFin = this.filtroFechaFin ? new Date(solicitud.fecha_creacion) <= new Date(this.filtroFechaFin) : true;\n        return cumpleTipo && cumpleFechaInicio && cumpleFechaFin;\n      });\n    }\n  },\n  created() {\n    this.fetchSolicitudes();\n  },\n  methods: {\n    async fetchSolicitudes() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/listar_solicitud');\n        this.solicitudes = response.data;\n      } catch (error) {\n        console.error('Error fetching solicitudes', error);\n      }\n    },\n    handleCardClick(id) {\n      this.selectedSolicitud = id;\n      this.selectedSolicitudTitle = this.getSolicitudTitle(id);\n      this.showModal = true;\n      this.solicitudModalInstance.show();\n    },\n    getSolicitudTitle(id) {\n      const solicitud = this.solicitudes.find(s => s.id_tipo_solicitud === id);\n      return solicitud ? solicitud.tipo_solicitud : '';\n    },\n    filtrarPorTipo(tipoId) {\n      this.filtroTipo = tipoId;\n    },\n    filtrarPorFecha() {\n      // El filtrado por fecha se maneja automáticamente a través del computed property\n    }\n  }\n};","map":{"version":3,"names":["axios","data","solicitudes","tiposSolicitudes","filtroTipo","filtroFechaInicio","filtroFechaFin","computed","solicitudesFiltradas","filter","solicitud","cumpleTipo","id_tipo_solicitud","cumpleFechaInicio","Date","fecha_creacion","cumpleFechaFin","created","fetchSolicitudes","methods","response","get","error","console","handleCardClick","id","selectedSolicitud","selectedSolicitudTitle","getSolicitudTitle","showModal","solicitudModalInstance","show","find","s","tipo_solicitud","filtrarPorTipo","tipoId","filtrarPorFecha"],"sources":["C:\\laragon\\www\\intranet-frontend\\src\\components\\Historial_Solicitudes.vue"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n          <div>\r\n            <button \r\n              class=\"btn btn-secondary dropdown-toggle\" \r\n              type=\"button\" \r\n              id=\"dropdownMenuButton\" \r\n              data-bs-toggle=\"dropdown\" \r\n              aria-expanded=\"false\">\r\n              Filtrar por Formulario\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n              <li v-for=\"tipo in tiposSolicitudes\" :key=\"solicitud.id_tipo_solicitud\">\r\n                <a \r\n                  class=\"dropdown-item\" \r\n                  href=\"#\" \r\n                  @click.prevent=\"filtrarPorTipo(solicitud.id_tipo_solicitud)\">\r\n                  {{ solicitud.tipo_solicitud }}\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"d-flex\">\r\n            <input \r\n              type=\"date\" \r\n              class=\"form-control me-2\" \r\n              v-model=\"filtroFechaInicio\" \r\n              @change=\"filtrarPorFecha\" \r\n              placeholder=\"Fecha de Inicio\" />\r\n            <input \r\n              type=\"date\" \r\n              class=\"form-control\" \r\n              v-model=\"filtroFechaFin\" \r\n              @change=\"filtrarPorFecha\" \r\n              placeholder=\"Fecha de Fin\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <table class=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">ID</th>\r\n                <th scope=\"col\">Tipo de Solicitud</th>\r\n                <th scope=\"col\">Fecha de inicio de solicitud</th>\r\n                <th scope=\"col\">Fecha de fin de solicitud</th>\r\n                <th scope=\"col\">Estado</th>\r\n                <th scope=\"col\">Fecha de Creación</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"solicitud in solicitudesFiltradas\" :key=\"solicitud.id\">\r\n                <td>{{ solicitud.id }}</td>\r\n                <td>{{ solicitud.tipo_solicitud.tipo_solicitud }}</td>\r\n                <td>{{ solicitud.fecha_inicio }}</td>\r\n                <td>{{ solicitud.fecha_fin }}</td>\r\n                <td>{{ solicitud.estado }}</td>\r\n                <td>{{ solicitud.fecha_creacion }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  \r\n  export default {\r\n    data() {\r\n      return {\r\n        solicitudes: [],\r\n        tiposSolicitudes: [],\r\n        filtroTipo: null,\r\n        filtroFechaInicio: null,\r\n        filtroFechaFin: null,\r\n      };\r\n    },\r\n    computed: {\r\n      solicitudesFiltradas() {\r\n        return this.solicitudes.filter(solicitud => {\r\n          const cumpleTipo = this.filtroTipo ? solicitud.id_tipo_solicitud === this.filtroTipo : true;\r\n          const cumpleFechaInicio = this.filtroFechaInicio ? new Date(solicitud.fecha_creacion) >= new Date(this.filtroFechaInicio) : true;\r\n          const cumpleFechaFin = this.filtroFechaFin ? new Date(solicitud.fecha_creacion) <= new Date(this.filtroFechaFin) : true;\r\n          return cumpleTipo && cumpleFechaInicio && cumpleFechaFin;\r\n        });\r\n      },\r\n    },\r\n    created() {\r\n      this.fetchSolicitudes();\r\n    },\r\n    methods: {\r\n    async fetchSolicitudes() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/listar_solicitud');\r\n        this.solicitudes = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching solicitudes', error);\r\n      }\r\n    },\r\n    handleCardClick(id) {\r\n      this.selectedSolicitud = id;\r\n      this.selectedSolicitudTitle = this.getSolicitudTitle(id);\r\n      this.showModal = true;\r\n      this.solicitudModalInstance.show();\r\n    },\r\n    getSolicitudTitle(id) {\r\n      const solicitud = this.solicitudes.find(s => s.id_tipo_solicitud === id);\r\n      return solicitud ? solicitud.tipo_solicitud : '';\r\n    },\r\n    filtrarPorTipo(tipoId) {\r\n        this.filtroTipo = tipoId;\r\n    },\r\n    filtrarPorFecha() {\r\n        // El filtrado por fecha se maneja automáticamente a través del computed property\r\n    },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n  }\r\n  .card {\r\n    width: 100%;\r\n  }\r\n  .card-header {\r\n    background-color: #f8f9fa;\r\n  }\r\n  .dropdown-menu {\r\n    max-height: 200px;\r\n    overflow-y: auto;\r\n  }\r\n  </style>\r\n  "],"mappings":"AAoEE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,gBAAgB,EAAE,EAAE;MACpBC,UAAU,EAAE,IAAI;MAChBC,iBAAiB,EAAE,IAAI;MACvBC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,oBAAoBA,CAAA,EAAG;MACrB,OAAO,IAAI,CAACN,WAAW,CAACO,MAAM,CAACC,SAAQ,IAAK;QAC1C,MAAMC,UAAS,GAAI,IAAI,CAACP,UAAS,GAAIM,SAAS,CAACE,iBAAgB,KAAM,IAAI,CAACR,UAAS,GAAI,IAAI;QAC3F,MAAMS,iBAAgB,GAAI,IAAI,CAACR,iBAAgB,GAAI,IAAIS,IAAI,CAACJ,SAAS,CAACK,cAAc,KAAK,IAAID,IAAI,CAAC,IAAI,CAACT,iBAAiB,IAAI,IAAI;QAChI,MAAMW,cAAa,GAAI,IAAI,CAACV,cAAa,GAAI,IAAIQ,IAAI,CAACJ,SAAS,CAACK,cAAc,KAAK,IAAID,IAAI,CAAC,IAAI,CAACR,cAAc,IAAI,IAAI;QACvH,OAAOK,UAAS,IAAKE,iBAAgB,IAAKG,cAAc;MAC1D,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,gBAAgB,CAAC,CAAC;EACzB,CAAC;EACDC,OAAO,EAAE;IACT,MAAMD,gBAAgBA,CAAA,EAAG;MACvB,IAAI;QACF,MAAME,QAAO,GAAI,MAAMpB,KAAK,CAACqB,GAAG,CAAC,4CAA4C,CAAC;QAC9E,IAAI,CAACnB,WAAU,GAAIkB,QAAQ,CAACnB,IAAI;MAClC,EAAE,OAAOqB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MACpD;IACF,CAAC;IACDE,eAAeA,CAACC,EAAE,EAAE;MAClB,IAAI,CAACC,iBAAgB,GAAID,EAAE;MAC3B,IAAI,CAACE,sBAAqB,GAAI,IAAI,CAACC,iBAAiB,CAACH,EAAE,CAAC;MACxD,IAAI,CAACI,SAAQ,GAAI,IAAI;MACrB,IAAI,CAACC,sBAAsB,CAACC,IAAI,CAAC,CAAC;IACpC,CAAC;IACDH,iBAAiBA,CAACH,EAAE,EAAE;MACpB,MAAMf,SAAQ,GAAI,IAAI,CAACR,WAAW,CAAC8B,IAAI,CAACC,CAAA,IAAKA,CAAC,CAACrB,iBAAgB,KAAMa,EAAE,CAAC;MACxE,OAAOf,SAAQ,GAAIA,SAAS,CAACwB,cAAa,GAAI,EAAE;IAClD,CAAC;IACDC,cAAcA,CAACC,MAAM,EAAE;MACnB,IAAI,CAAChC,UAAS,GAAIgC,MAAM;IAC5B,CAAC;IACDC,eAAeA,CAAA,EAAG;MACd;IAAA;EAEJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}